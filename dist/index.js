(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Scheduler:()=>Ne,useScheduler:()=>He});const r=require("react/jsx-runtime"),n=require("react"),a=require("@mui/material"),i=require("date-fns"),s=({date:e,onClick:t,locale:n})=>(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Typography,{style:{fontWeight:(0,i.isToday)(e)?"bold":"inherit"},color:(0,i.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:r=>{r.stopPropagation(),t&&t(e)},children:(0,i.format)(e,"dd",{locale:n})}),(0,r.jsx)(a.Typography,{color:(0,i.isToday)(e)?"primary":"inherit",style:{fontWeight:(0,i.isToday)(e)?"bold":"inherit",fontSize:11},children:(0,i.format)(e,"eee",{locale:n})})]}),o=require("@mui/icons-material/ArrowRightRounded");var l=e.n(o);const d=require("@mui/icons-material/ArrowLeftRounded");var c=e.n(d);const u=require("@mui/icons-material/EventNoteRounded");var h=e.n(u);const p=require("@mui/icons-material/ClearRounded");var y=e.n(p);const g=require("@mui/icons-material/SupervisorAccountRounded");var m=e.n(g);const v=(0,a.styled)("div")((({theme:e,dialog:t})=>({position:"relative","& .rs__table_loading":{background:t?"":(0,a.alpha)(e.palette.background.paper,.4),position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:999999,"& > span":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& >span":{marginBottom:15}}}}))),f=(0,a.styled)("div")((({resource_count:e})=>({position:"relative",display:"flex",flexDirection:e>1?"row":"column",width:"100%",boxSizing:"content-box","& > div":{flexShrink:0,flexGrow:1}}))),x=(0,a.styled)("div")((({days:e,sticky:t="0",indent:r="1",theme:n})=>({display:"grid",gridTemplateColumns:+r>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,overflowX:"auto",overflowY:"hidden",position:"1"===t?"sticky":"relative",top:"1"===t?0:void 0,zIndex:"1"===t?3:void 0,[n.breakpoints.down("sm")]:{gridTemplateColumns:+r>0?`30px repeat(${e}, 1fr)`:""},borderStyle:"solid",borderColor:n.palette.grey[300],borderWidth:"0 0 0 1px","&:first-of-type":{borderWidth:"1px 0 0 1px"},"&:last-of-type":{borderWidth:"0 0 1px 1px"},"& .rs__cell":{background:n.palette.background.paper,position:"relative",borderStyle:"solid",borderColor:n.palette.grey[300],borderWidth:"0 1px 1px 0","&.rs__header":{"& > :first-of-type":{padding:"2px 5px"}},"&.rs__header__center":{padding:"6px 0px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",position:"sticky",left:0,zIndex:2,[n.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},"& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:(0,a.alpha)(n.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}},"&:not(.rs__time)":{minWidth:65}}}))),j=(0,a.styled)("div")((({theme:e})=>({maxWidth:"100%",width:400,"& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiIconButton-root":{color:e.palette.primary.contrastText}}}}))),b=(0,a.styled)("div")((({theme:e})=>({display:"inherit","& .MuiIconButton-root":{color:e.palette.primary.contrastText},"& .MuiButton-root":{"&.delete":{color:e.palette.error.main},"&.cancel":{color:e.palette.action.disabled}}}))),w=(0,a.styled)("div")((({theme:e})=>({position:"absolute",zIndex:2,width:"100%",display:"flex","& > div:first-of-type":{height:12,width:12,borderRadius:"50%",background:e.palette.error.light,marginLeft:-6,marginTop:-5},"& > div:last-of-type":{borderTop:`solid 2px ${e.palette.error.light}`,width:"100%"}}))),_=require("@mui/icons-material/DeleteRounded");var D=e.n(_);const k=require("@mui/icons-material/EditRounded");var M=e.n(k);const C=require("date-fns/locale/en-US");var T=e.n(C);const S=(e,t,r)=>{const n=e.config?.multiple&&!Array.isArray(r?.[e.name]||e.default),a=n?t?[t]:[]:t;return{value:a,validity:n?a.length:a}},F=(e,t,r,n)=>{const a=r.idField,i=!!n.find((e=>e.name===a))?.config?.multiple,s=[];for(const n of e){const e=i&&!Array.isArray(n[a])?[n[a]]:n[a];(i?e.includes(t[a]):e===t[a])&&s.push({...n,color:n.color||t[r.colorField||""]})}return s},E=(e,t)=>Math.ceil(e)/t,O=(e,t)=>Math.max(e/t,60),I=(e,t)=>(0,i.differenceInDays)((0,i.endOfDay)(t),(0,i.startOfDay)(e)),$=(e,t,r)=>{const n=[];for(let a=0;a<e.length;a++){const s=P(e[a],r);s.allDay||!(0,i.isSameDay)(t,s.start)||I(s.start,s.end)||n.push(s)}return n.sort(((e,t)=>e.end.getTime()-t.end.getTime()))},R=(e,t,r)=>{const n=[];for(let a=0;a<e.length;a++){const s=P(e[a],r);let o=s.allDay||I(s.start,s.end)>0;o&&(o=Array.isArray(t)?t.some((e=>(0,i.isWithinInterval)(e,{start:(0,i.startOfDay)(s.start),end:(0,i.endOfDay)(s.end)}))):(0,i.isWithinInterval)(t,{start:(0,i.startOfDay)(s.start),end:(0,i.endOfDay)(s.end)}),o&&n.push(s))}return n},P=(e,t)=>({...e,start:W(e.start,t),end:W(e.end,t)}),W=(e,t)=>new Date(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"medium",timeZone:t}).format(e)),H={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,navigation:!0,disableGoToDay:!0},N={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,step:60,navigation:!0,disableGoToDay:!1},L={startHour:9,endHour:17,step:60,navigation:!0},q={idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},z=(e={})=>{const{navigation:t,form:r,event:n,...a}=e;return{navigation:Object.assign({month:"Month",week:"Week",day:"Day",today:"Today"},t),form:Object.assign({addTitle:"Add Event",editTitle:"Edit Event",confirm:"Confirm",delete:"Delete",cancel:"Cancel"},r),event:Object.assign({title:"Title",start:"Start",end:"End",allDay:"All Day"},n),...Object.assign({moreEvents:"More...",loading:"Loading..."},a)}},B=e=>{const{month:t,week:r,day:n,translations:a,resourceFields:i,view:s,...o}=e,l=(e=>{const{month:t,week:r,day:n}=e;return{month:null!==t?Object.assign(H,t):null,week:null!==r?Object.assign(N,r):null,day:null!==n?Object.assign(L,n):null}})(e),d=s||"week",c=l[d]?d:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(l);return{...l,translations:z(a),resourceFields:Object.assign(q,i),view:c,...Object.assign({height:600,navigation:!0,selectedDate:new Date,disableViewNavigator:!1,events:[],fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],recourseHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:T(),deletable:!0,editable:!0,hourFormat:"12",draggable:!0},o)}},A={...B({}),initiateProps:()=>{},dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}},V=(e=>{const t=(()=>{const e=new Map;return{emit:t=>e.forEach((e=>e(t))),subscribe:t=>{const r=Symbol();return e.set(r,t),()=>{e.delete(r)}}}})();let r=A;const a=()=>r,s=e=>{r=e(r),t.emit(r)};return r=((e,t)=>({...e(),handleState:(e,r)=>{t((t=>({...t,[r]:e})))},getViews:()=>(e=>{const t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(e()),triggerDialog:(e,r)=>{const n=r;t((t=>({...t,dialog:e,selectedRange:n?.event_id?void 0:n||{start:new Date,end:new Date(Date.now()+36e5)},selectedEvent:n?.event_id?n:void 0})))},triggerLoading:e=>{void 0===A.loading&&t((t=>({...t,loading:e})))},handleGotoDay:r=>{const n=e().getViews();n.includes("day")?t((e=>({...e,view:"day",selectedDate:r}))):n.includes("week")?t((e=>({...e,view:"week",selectedDate:r}))):console.warn("No Day/Week views available")},confirmEvent:(r,n)=>{const a=e();let i;i="edit"===n?Array.isArray(r)?a.events.map((e=>{const t=r.find((t=>t.event_id===e.event_id));return t?{...e,...t}:e})):a.events.map((e=>e.event_id===r.event_id?{...e,...r}:e)):a.events.concat(r),t((e=>({...e,events:i})))},onDrop:async(t,r,n,a)=>{const s=e(),o=s.events.find((e=>"number"==typeof e.event_id?e.event_id===+t:e.event_id===t)),l=s.fields.find((e=>e.name===n)),d=!!l?.config?.multiple;let c=a;if(l){const e=o[n],t=S(l,e,o).value;if(d)if(t.includes(a)){if((0,i.isEqual)(o.start,r))return;c=t}else c=t.length>1?[...t,a]:[a]}if((0,i.isEqual)(o.start,r)&&(!c||!d&&c===o[n]))return;const u=(0,i.differenceInMinutes)(o.end,o.start),h={...o,start:r,end:(0,i.addMinutes)(r,u),[n]:c||""};if(!s.onEventDrop||"function"!=typeof s.onEventDrop)return s.confirmEvent(h,"edit");try{s.triggerLoading(!0);const e=await s.onEventDrop(r,h,o);e&&s.confirmEvent(e,"edit")}finally{s.triggerLoading(!1)}}}))(a,s),e=>{const r=a(),i=e?{...r,...B(e)}:r,[o,l]=(0,n.useState)(i);return(0,n.useEffect)((()=>t.subscribe(l)),[]),(0,n.useEffect)((()=>{e&&s((e=>i))}),[]),o}})(),G=({event:e,onDelete:t,onEdit:i,direction:s,editable:o,deletable:l})=>{const{translations:d}=V(),[c,u]=(0,n.useState)(!1),h=()=>{if(!c)return u(!0);t()},p=(0,n.useMemo)((()=>void 0!==e.deletable?e.deletable:l),[l,e.deletable]),y=(0,n.useMemo)((()=>void 0!==e.editable?e.editable:o),[o,e.editable]);return(0,r.jsxs)(b,{children:[(0,r.jsx)(a.Grow,{in:!c,exit:!1,timeout:400,unmountOnExit:!0,children:(0,r.jsxs)("div",{children:[y&&(0,r.jsx)(a.IconButton,{size:"small",onClick:i,children:(0,r.jsx)(M(),{})}),p&&(0,r.jsx)(a.IconButton,{size:"small",onClick:h,children:(0,r.jsx)(D(),{})})]})}),(0,r.jsx)(a.Slide,{in:c,direction:"rtl"===s?"right":"left",unmountOnExit:!0,timeout:400,exit:!1,children:(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Button,{className:"delete",size:"small",onClick:h,children:d.form.delete.toUpperCase()}),(0,r.jsx)(a.Button,{className:"cancel",size:"small",onClick:()=>u(!1),children:d.form.cancel.toUpperCase()})]})})]})},Z=({event:e,multiday:t,hasPrev:s,hasNext:o,showdate:d})=>{const{triggerDialog:u,onDelete:p,events:g,handleState:v,triggerLoading:f,viewerExtraComponent:x,fields:b,direction:w,resources:_,resourceFields:D,locale:k,viewerTitleComponent:M,editable:C,deletable:T,hourFormat:S,eventRenderer:F,onEventClick:E,view:O,draggable:$,translations:R}=V(),[P,W]=(0,n.useState)(null),[H,N]=(0,n.useState)(!1),L=(0,a.useTheme)(),q="12"===S?"hh:mm a":"HH:mm",z="rtl"===w?c():l(),B="rtl"===w?l():c(),A=I(e.start,e.end)<=0&&e.allDay,Z=e=>{!e&&H&&N(!1),W(e||null)},K=async()=>{try{f(!0);let t=e.event_id;if(p){const e=await p(t);t=e||""}if(t){Z();const e=g.filter((e=>e.event_id!==t));v(e,"events")}}catch(e){console.error(e)}finally{f(!1)}},U=(0,n.useMemo)((()=>{if(e.disabled)return!1;let t=void 0===$||$;return void 0!==e.draggable&&(t=e.draggable),t}),[$,e.disabled,e.draggable]),X=(0,n.useMemo)((()=>{if("function"==typeof F&&!t&&"month"!==O){const t=F(e);if(t)return t}let n=(0,r.jsxs)("div",{style:{padding:2},children:[(0,r.jsx)(a.Typography,{variant:"subtitle2",style:{fontSize:12},noWrap:!0,children:e.title}),d&&(0,r.jsx)(a.Typography,{style:{fontSize:11},noWrap:!0,children:`${(0,i.format)(e.start,q,{locale:k})} - ${(0,i.format)(e.end,q,{locale:k})}`})]});return t&&(n=(0,r.jsxs)("div",{style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(a.Typography,{sx:{fontSize:11},noWrap:!0,children:s?(0,r.jsx)(B,{fontSize:"small",sx:{display:"flex"}}):d&&!A&&(0,i.format)(e.start,q,{locale:k})}),(0,r.jsx)(a.Typography,{variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0,children:e.title}),(0,r.jsx)(a.Typography,{sx:{fontSize:11},noWrap:!0,children:o?(0,r.jsx)(z,{fontSize:"small",sx:{display:"flex"}}):d&&!A&&(0,i.format)(e.end,q,{locale:k})})]})),n}),[s,o,e,U,k,L.palette]);return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(a.Paper,{style:{width:"100%",height:"100%",display:"block",background:e.disabled?"#d0d0d0":e.color||L.palette.primary.main,color:e.disabled?"#808080":L.palette.primary.contrastText,cursor:e.disabled?"not-allowed":"pointer",overflow:"hidden"},children:(0,r.jsx)(a.ButtonBase,{onClick:t=>{t.preventDefault(),t.stopPropagation(),Z(t.currentTarget),"function"==typeof E&&E(e)},disabled:e.disabled,style:{width:"100%",height:"100%",display:"block"},children:(0,r.jsx)("div",{style:{height:"100%"},draggable:U,onDragStart:t=>{t.stopPropagation(),t.dataTransfer.setData("text/plain",`${e.event_id}`),t.currentTarget.style.backgroundColor=L.palette.error.main},onDragEnd:t=>{t.currentTarget.style.backgroundColor=e.color||L.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()},children:X})})},`${e.start.getTime()}_${e.end.getTime()}_${e.event_id}`),(0,r.jsx)(a.Popover,{open:Boolean(P),anchorEl:P,onClose:()=>{Z()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()},children:(()=>{const t=D.idField,n=_.filter((r=>Array.isArray(e[t])?e[t].includes(r[t]):r[t]===e[t]));return(0,r.jsxs)(j,{children:[(0,r.jsxs)("div",{style:{background:e.color||L.palette.primary.main,color:L.palette.primary.contrastText},children:[(0,r.jsxs)("div",{className:"rs__popper_actions",children:[(0,r.jsx)("div",{children:(0,r.jsx)(a.IconButton,{size:"small",onClick:()=>{Z()},children:(0,r.jsx)(y(),{color:"disabled"})})}),(0,r.jsx)(G,{event:e,onDelete:K,onEdit:()=>{Z(),u(!0,e)},direction:w,deletable:T,editable:C})]}),M instanceof Function?M(e):(0,r.jsx)(a.Typography,{style:{padding:"5px 0"},noWrap:!0,children:e.title})]}),(0,r.jsxs)("div",{style:{padding:"5px 10px"},children:[(0,r.jsxs)(a.Typography,{style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0,children:[(0,r.jsx)(h(),{}),A?R.event.allDay:`${(0,i.format)(e.start,`dd MMMM yyyy ${q}`,{locale:k})} - ${(0,i.format)(e.end,`dd MMMM yyyy ${q}`,{locale:k})}`]}),n.length>0&&(0,r.jsxs)(a.Typography,{style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0,children:[(0,r.jsx)(m(),{}),n.map((e=>e[D.textField])).join(", ")]}),x instanceof Function?x(b,e):x]})]})})()})]})};Z.defaultProps={multiday:!1,showdate:!0};const K=Z,U=({resource:e})=>{const{recourseHeaderComponent:t,resourceFields:i,resources:s,direction:o,resourceViewMode:l}=V(),{width:d}=function(){const[e,t]=(0,n.useState)({width:0,height:0});return(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>{t((e=>{const{innerWidth:t,innerHeight:r}=window;return e.width!==t||e.height!==r?{width:t,height:r}:e}))};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}}),[]),e}(),c=e[i.textField],u=e[i.subTextField||""],h=e[i.avatarField||""],p=e[i.colorField||""];if(t instanceof Function)return t(e);const y="tabs"===l?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return(0,r.jsxs)(a.ListItem,{sx:{padding:"2px 10px",textAlign:"rtl"===o?"right":"left",...y},component:"span",children:[(0,r.jsx)(a.ListItemAvatar,{children:(0,r.jsx)(a.Avatar,{style:{background:p},alt:c,src:h})}),(0,r.jsx)(a.ListItemText,{primary:(0,r.jsx)(a.Typography,{variant:"body2",noWrap:!0,children:c}),secondary:(0,r.jsx)(a.Typography,{variant:"caption",color:"textSecondary",noWrap:!0,children:u}),style:{width:d/(s.length+1)}})]})},X=require("prop-types");var Q=e.n(X);const Y=require("@mui/material/styles");function J(e){const{children:t,value:n,index:a}=e;return n===a?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(r.Fragment,{})}J.propTypes={children:Q().node,index:Q().any.isRequired,value:Q().any.isRequired};const ee=(0,Y.styled)("div")((({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:e.palette.grey[300],borderStyle:"solid",borderWidth:1,"& button.MuiTab-root":{borderColor:e.palette.grey[300],borderRightStyle:"solid",borderWidth:1}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}}))),te=({tabs:e,variant:t,tab:n,setTab:i,indicator:s,style:o})=>(0,r.jsxs)(ee,{style:o,children:[(0,r.jsx)(a.Tabs,{value:n,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:s},children:e.map(((e,t)=>{return(0,r.jsx)(a.Tab,{label:e.label,value:e.id,...(n=e.id,{id:`scrollable-auto-tab-${n}`,"aria-controls":`scrollable-auto-tabpanel-${n}`}),onClick:()=>i(e.id),onDragEnter:()=>i(e.id)},e.id||t);var n}))}),e.map(((e,t)=>e.component&&(0,r.jsx)(J,{value:n,index:e.id,children:e.component},t)))]});te.defaultProps={variant:"scrollable",indicator:"primary"};const re=({renderChildren:e})=>{const{resourceViewMode:t}=V();return"tabs"===t?(0,r.jsx)(ae,{renderChildren:e}):(0,r.jsx)(ne,{renderChildren:e})},ne=({renderChildren:e})=>{const{resources:t,resourceFields:n}=V();return(0,r.jsx)(r.Fragment,{children:t.map(((t,a)=>(0,r.jsxs)("div",{children:[(0,r.jsx)(U,{resource:t}),e(t)]},`${t[n.idField]}_${a}`)))})},ae=({renderChildren:e})=>{const{resources:t,resourceFields:a,selectedResource:i,handleState:s}=V(),o=t.map((t=>({id:t[a.idField],label:(0,r.jsx)(U,{resource:t}),component:(0,r.jsx)(r.Fragment,{children:e(t)})}))),l=(0,n.useMemo)((()=>{const e=t[0][a.idField];return i?t.findIndex((e=>e[a.idField]===i))<0?e:i:e}),[t,i,a.idField]);return(0,r.jsx)(te,{tabs:o,tab:l,setTab:e=>{s(e,"selectedResource")},style:{display:"grid"}})};re.defaultProps={span:1};const ie=({day:e,start:t,end:n,resourceKey:i,resourceVal:s,cellRenderer:o,height:l,children:d})=>{const c=(({start:e,end:t,resourceKey:r,resourceVal:n})=>{const{triggerDialog:i,onDrop:s}=V(),o=(0,a.useTheme)();return{onClick:()=>{i(!0,{start:e,end:t,[r]:n})},onDragOver:e=>{e.currentTarget.style.backgroundColor=(0,a.alpha)(o.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=(0,a.alpha)(o.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.preventDefault(),t.currentTarget.style.backgroundColor="";const a=t.dataTransfer.getData("text");s(a,e,r,n)},[r]:n}})({start:t,end:n,resourceKey:i,resourceVal:s});return o?o({day:e,start:t,end:n,height:l,...c}):(0,r.jsx)(a.Button,{fullWidth:!0,...c,children:d})};function se({today:e,startHour:t,step:r,minuteHeight:n}){const a=new Date,s=(0,i.differenceInMinutes)(a,(0,i.setHours)(e,t));return s*n+(s/r+1)}const oe=e=>{const[t,a]=(0,n.useState)(se(e));return(0,n.useEffect)((()=>{const t=setInterval((()=>a(se(e))),6e4);return()=>clearInterval(t)}),[]),t<0?null:(0,r.jsx)(n.Fragment,{children:(0,r.jsxs)(w,{style:{top:t},children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})})},le=({todayEvents:e,today:t,startHour:a,step:s,minuteHeight:o,direction:l})=>{const d=[];return(0,r.jsxs)(n.Fragment,{children:[(0,i.isToday)(t)&&(0,r.jsx)(oe,{today:t,startHour:a,step:s,minuteHeight:o}),e.map((n=>{const c=(0,i.differenceInMinutes)(n.end,n.start)*o,u=(0,i.differenceInMinutes)(n.start,(0,i.setHours)(t,a)),h=u*o+(u/s+1)/2;if(h<0)return null;const p=((e,t)=>e.filter((e=>e.event_id!==t.event_id&&((0,i.isWithinInterval)((0,i.addMinutes)(t.start,1),{start:e.start,end:e.end})||(0,i.isWithinInterval)((0,i.addMinutes)(t.end,-1),{start:e.start,end:e.end})||(0,i.isWithinInterval)((0,i.addMinutes)(e.start,1),{start:t.start,end:t.end})||(0,i.isWithinInterval)((0,i.addMinutes)(e.end,-1),{start:t.start,end:t.end})))))(e,n),y=p.filter((e=>d.includes(e.event_id)));return d.push(n.event_id),(0,r.jsx)("div",{className:"rs__event__item",style:{height:c,top:h,width:p.length?100/(p.length+1)+"%":"95%",["rtl"===l?"right":"left"]:y.length>0?`calc(100%/${y.length+1})`:""},children:(0,r.jsx)(K,{event:n})},n.event_id)}))]})},de=()=>{const e=(0,n.useRef)(null),t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const r=e.current,n=t.current,a=e=>{const t=e.currentTarget;n?.scroll({left:t.scrollLeft}),r?.scroll({left:t.scrollLeft})};return r?.addEventListener("scroll",a),n?.addEventListener("scroll",a),()=>{r?.removeEventListener("scroll",a),n?.removeEventListener("scroll",a)}})),{headersRef:e,bodyRef:t}},ce=()=>{const{week:e,selectedDate:t,height:o,events:l,handleGotoDay:d,getRemoteEvents:c,triggerLoading:u,handleState:h,resources:p,resourceFields:y,resourceViewMode:g,fields:m,direction:v,locale:f,hourFormat:j,timeZone:b}=V(),{weekStartOn:w,weekDays:_,startHour:D,endHour:k,step:M,cellRenderer:C,disableGoToDay:T}=e,S=(0,i.startOfWeek)(t,{weekStartsOn:w}),P=_.map((e=>(0,i.addDays)(S,e))),H=(0,i.startOfDay)(P[0]),N=(0,i.endOfDay)(P[P.length-1]),L=(0,i.setMinutes)((0,i.setHours)(t,D),0),q=(0,i.setMinutes)((0,i.setHours)(t,k),0),z=(0,i.eachMinuteOfInterval)({start:L,end:q},{step:M}),B=O(o,z.length),A=E(B,M),G="12"===j?"hh:mm a":"HH:mm",{headersRef:Z,bodyRef:U}=de(),X=(0,n.useCallback)((async()=>{try{u(!0);const e=await c({start:H,end:N,view:"week"});Array.isArray(e)&&h(e,"events")}catch(e){throw e}finally{u(!1)}}),[t,c]);(0,n.useEffect)((()=>{c instanceof Function&&X()}),[X,c]);const Q=(e,t)=>{const n=(0,i.isSameDay)(H,t);return R(e,P,b).filter((e=>(0,i.isBefore)(e.start,H)?n:(0,i.isSameDay)(e.start,t))).sort(((e,t)=>t.end.getTime()-e.end.getTime())).map(((a,s)=>{const o=(0,i.isBefore)((0,i.startOfDay)(a.start),H),l=(0,i.isAfter)((0,i.endOfDay)(a.end),N),d=I(o?H:a.start,l?N:a.end)+1,c=e.filter((e=>!n&&e.event_id!==a.event_id&&(0,i.isWithinInterval)(t,{start:W(e.start,b),end:W(e.end,b)})));let u=s;return c.length&&(u+=c.length),(0,r.jsx)("div",{className:"rs__multi_day",style:{top:28*u+45,width:100*d+"%"},children:(0,r.jsx)(K,{event:a,hasPrev:o,hasNext:l,multiday:!0})},a.event_id)}))},Y=e=>{let t=l;e&&(t=F(l,e,y,m));const o=p.length&&"tabs"!==g,c=28*R(o?l:t,P,b).length+45;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x,{days:P.length,ref:Z,sticky:"1",children:[(0,r.jsx)("span",{className:"rs__cell rs__time"}),P.map(((e,n)=>(0,r.jsxs)("span",{className:"rs__cell rs__header "+((0,i.isToday)(e)?"rs__today_cell":""),style:{height:c},children:[(0,r.jsx)(s,{date:e,onClick:T?void 0:d,locale:f}),Q(t,e)]},n)))]}),(0,r.jsx)(x,{days:P.length,ref:U,children:z.map(((s,o)=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("span",{style:{height:B},className:"rs__cell rs__header rs__time",children:(0,r.jsx)(a.Typography,{variant:"caption",children:(0,i.format)(s,G,{locale:f})})}),P.map(((n,a)=>{const l=new Date(`${(0,i.format)(n,"yyyy/MM/dd")} ${(0,i.format)(s,G)}`),d=new Date(`${(0,i.format)(n,"yyyy/MM/dd")} ${(0,i.format)((0,i.addMinutes)(s,M),G)}`),c=y.idField;return(0,r.jsxs)("span",{className:"rs__cell "+((0,i.isToday)(n)?"rs__today_cell":""),children:[0===o&&(0,r.jsx)(le,{todayEvents:$(t,n,b),today:n,minuteHeight:A,startHour:D,step:M,direction:v}),(0,r.jsx)(ie,{start:l,end:d,day:n,height:B,resourceKey:c,resourceVal:e?e[c]:null,cellRenderer:C})]},a)}))]},o)))})]})};return p.length?(0,r.jsx)(re,{renderChildren:Y}):Y()},ue=require("@mui/x-date-pickers/LocalizationProvider"),he=require("@mui/x-date-pickers/AdapterDateFns"),pe=({children:e})=>{const{locale:t}=V();return(0,r.jsx)(ue.LocalizationProvider,{dateAdapter:he.AdapterDateFns,adapterLocale:t,children:e})},ye=require("@mui/x-date-pickers/DatePicker"),ge=require("@mui/icons-material/NavigateBeforeRounded");var me=e.n(ge);const ve=require("@mui/icons-material/NavigateNextRounded");var fe=e.n(ve);const xe=({type:e,onClick:t})=>{const{direction:n}=V();let i=fe();return"prev"===e?i="rtl"===n?fe():me():"next"===e&&(i="rtl"===n?me():fe()),(0,r.jsx)(a.IconButton,{style:{padding:2},onClick:t,onDragOver:e=>{e.preventDefault(),t&&t()},children:(0,r.jsx)(i,{})})},je=({selectedDate:e,onChange:t,weekProps:s})=>{const{locale:o,navigationPickerProps:l}=V(),[d,c]=(0,n.useState)(!1),{weekStartOn:u}=s,h=(0,i.startOfWeek)(e,{weekStartsOn:u}),p=(0,i.endOfWeek)(e,{weekStartsOn:u}),y=()=>c(!d);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(xe,{type:"prev",onClick:()=>{const e=(0,i.addDays)(h,-1);t(e,"selectedDate")}}),(0,r.jsx)(pe,{children:(0,r.jsx)(ye.DatePicker,{...l,open:d,onClose:y,openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:e=>(0,r.jsx)(a.Button,{ref:e.inputRef,style:{padding:4},onClick:y,children:`${(0,i.format)(h,"dd",{locale:o})} - ${(0,i.format)(p,"dd MMMM yyyy",{locale:o})}`})})}),(0,r.jsx)(xe,{type:"next",onClick:()=>{const e=(0,i.addDays)(p,1);t(e,"selectedDate")}})]})},be=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:o}=V(),[l,d]=(0,n.useState)(!1),c=()=>d(!l);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(xe,{type:"prev",onClick:()=>{const r=(0,i.addDays)(e,-1);t(r,"selectedDate")}}),(0,r.jsx)(pe,{children:(0,r.jsx)(ye.DatePicker,{...o,open:l,onClose:c,openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:t=>(0,r.jsx)(a.Button,{ref:t.inputRef,style:{padding:4},onClick:c,children:`${(0,i.format)(e,"dd, MMMM yyyy",{locale:s})}`})})}),(0,r.jsx)(xe,{type:"next",onClick:()=>{const r=(0,i.addDays)(e,1);t(r,"selectedDate")}})]})},we=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:o}=V(),[l,d]=(0,n.useState)(!1),c=(0,i.getMonth)(e),u=()=>d(!l);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(xe,{type:"prev",onClick:()=>{const r=c-1;t((0,i.setMonth)(e,r),"selectedDate")}}),(0,r.jsx)(pe,{children:(0,r.jsx)(ye.DatePicker,{...o,open:l,onClose:u,openTo:"month",views:["year","month"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:t=>(0,r.jsx)(a.Button,{ref:t.inputRef,style:{padding:4},onClick:u,children:(0,i.format)(e,"MMMM yyyy",{locale:s})})})}),(0,r.jsx)(xe,{type:"next",onClick:()=>{const r=c+1;t((0,i.setMonth)(e,r),"selectedDate")}})]})},_e=require("@mui/icons-material/MoreVert");var De=e.n(_e);const ke=()=>{const{selectedDate:e,view:t,week:i,handleState:s,getViews:o,translations:l,navigation:d,day:c,month:u,disableViewNavigator:h}=V(),[p,y]=(0,n.useState)(null),g=(0,a.useTheme)(),m=(0,a.useMediaQuery)(g.breakpoints.up("sm")),v=o(),f=e=>{y(e||null)};return(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("div",{"data-testid":"date-navigator",children:d&&(()=>{switch(t){case"month":return u?.navigation&&(0,r.jsx)(we,{selectedDate:e,onChange:s});case"week":return i?.navigation&&(0,r.jsx)(je,{selectedDate:e,onChange:s,weekProps:i});case"day":return c?.navigation&&(0,r.jsx)(be,{selectedDate:e,onChange:s});default:return""}})()}),(0,r.jsxs)("div",{"data-testid":"view-navigator",style:{visibility:h?"hidden":"visible"},children:[(0,r.jsx)(a.Button,{onClick:()=>s(new Date,"selectedDate"),children:l.navigation.today}),v.length>1&&(m?v.map((e=>(0,r.jsx)(a.Button,{color:e===t?"primary":"inherit",onClick:()=>s(e,"view"),onDragOver:t=>{t.preventDefault(),s(e,"view")},children:l.navigation[e]},e))):(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(a.IconButton,{style:{padding:5},onClick:e=>{f(e.currentTarget)},children:(0,r.jsx)(De(),{})}),(0,r.jsx)(a.Popover,{open:Boolean(p),anchorEl:p,onClose:()=>{f()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,r.jsx)(a.MenuList,{autoFocusItem:!!p,disablePadding:!0,children:v.map((e=>(0,r.jsx)(a.MenuItem,{selected:e===t,onClick:()=>{f(),s(e,"view")},children:l.navigation[e]},e)))})})]}))]})]})},Me=require("@mui/x-date-pickers/DateTimePicker"),Ce=({type:e,value:t,label:n,name:i,onChange:s,variant:o,error:l,errMsg:d})=>{const c="date"===e?ye.DatePicker:Me.DateTimePicker;return(0,r.jsx)(pe,{children:(0,r.jsx)(c,{value:t,label:n,onChange:e=>s(i,new Date(e||"")),minutesStep:5,renderInput:e=>(0,r.jsx)(a.TextField,{variant:o,helperText:l?d:"",error:l,style:{width:"100%"},...e})})})};Ce.defaultProps={type:"datetime",variant:"outlined"};const Te=({variant:e,label:t,placeholder:i,value:s,name:o,required:l,min:d,max:c,email:u,decimal:h,onChange:p,disabled:y,multiline:g,rows:m,touched:v})=>{const[f,x]=(0,n.useState)({touched:!1,valid:!1,errorMsg:""});(0,n.useEffect)((()=>{v&&j(s)}),[v]);const j=e=>{const t=e;let r=!0,n="";u&&(r=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&r,n="Invalid Email"),h&&(r=/^[0-9]+(\.[0-9]*)?$/.test(t)&&r,n="Only Numbers Allowed"),d&&`${t}`.trim().length<d&&(r=!1,n=`Minimum ${d} letters`),c&&`${t}`.trim().length>c&&(r=!1,n=`Maximum ${c} letters`),l&&`${t}`.trim().length<=0&&(r=!1,n="Required"),x({touched:!0,valid:r,errorMsg:n}),p(o,t,r)};return(0,r.jsx)(a.TextField,{variant:e,label:t&&(0,r.jsx)(a.Typography,{variant:"body2",children:`${t} ${l?"*":""}`}),value:s,name:o,onChange:e=>j(e.target.value),disabled:y,error:f.touched&&!f.valid,helperText:f.touched&&!f.valid&&f.errorMsg,multiline:g,rows:m,style:{width:"100%"},InputProps:{placeholder:i||""}})};Te.defaultProps={variant:"outlined"};const Se=require("@mui/icons-material/ExpandMore");var Fe=e.n(Se);const Ee=({options:e,value:t,name:i,required:s,onChange:o,label:l,disabled:d,touched:c,variant:u,loading:h,multiple:p,placeholder:y,errMsg:g})=>{const m=(0,a.useTheme)(),[v,f]=(0,n.useState)({touched:!1,valid:!!t,errorMsg:g||(s?"Required":void 0)});(0,n.useEffect)((()=>{c&&x(t)}),[c]);const x=e=>{const t=e;let r=!0,n=g;!s||(p?t.length:t)||(r=!1,n="Required"),f((e=>({...e,touched:!0,valid:r,errorMsg:n}))),o(i,t,r)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.FormControl,{variant:u||"outlined",fullWidth:!0,error:s&&v.touched&&!v.valid,disabled:d,children:[l&&(0,r.jsx)(a.InputLabel,{id:`input_${i}`,children:(0,r.jsx)(a.Typography,{variant:"body2",children:`${l} ${s?"*":""}`})}),(0,r.jsxs)(a.Select,{label:l,labelId:`input_${i}`,value:t,onBlur:()=>{v.touched||f((e=>({...e,touched:!0,errorMsg:g||e.errorMsg})))},onChange:e=>x(e.target.value),IconComponent:h?()=>(0,r.jsx)(a.CircularProgress,{size:5}):Fe(),multiple:!!p,classes:{select:"chips"===p?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return(0,r.jsx)("em",{children:l});const n=[];if(p){for(const r of e)t.includes(r.value)&&n.push([r.text]);return"chips"===p?n.map(((e,t)=>(0,r.jsx)(a.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`))):n.join(",")}for(const r of e)t===r.value&&n.push([r.text]);return n.join(",")},children:[y&&(0,r.jsx)(a.MenuItem,{value:"",children:(0,r.jsx)("em",{children:y})}),e.map((e=>(0,r.jsxs)(a.MenuItem,{value:e.value,children:[p&&(0,r.jsx)(a.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text]},e.id||e.value)))]})]}),(0,r.jsx)(a.FormHelperText,{style:{color:m.palette.error.main},children:v.touched&&!v.valid&&v.errorMsg})]})};Ee.defaultProps={variant:"outlined"};const Oe=(e,t)=>{const r={};for(const n of e){const e=S(n,n.default,t),a=S(n,t?.[n.name],t);r[n.name]={value:a.value||e.value||"",validity:!n.config?.required||!!a.validity||!!e.validity,type:n.type,config:n.config}}return{event_id:{value:t?.event_id||null,validity:!0,type:"hidden"},title:{value:t?.title||"",validity:!!t?.title,type:"input",config:{label:"Title",required:!0,min:3}},start:{value:t?.start||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:t?.end||new Date,validity:!0,type:"date",config:{label:"End",sm:6}},...r}},Ie=()=>{const{fields:e,dialog:t,triggerDialog:s,selectedRange:o,selectedEvent:l,triggerLoading:d,onConfirm:c,customEditor:u,confirmEvent:h,dialogMaxWidth:p,translations:y}=V(),[g,m]=(0,n.useState)(Oe(e,l||o)),[v,f]=(0,n.useState)(!1),x=(0,a.useTheme)(),j=(0,a.useMediaQuery)(x.breakpoints.down("sm")),b=(e,t,r)=>{m((n=>({...n,[e]:{...n[e],value:t,validity:r}})))},w=t=>{t&&m(Oe(e)),s(!1)},_=async()=>{let e={};for(const t in g)if(e[t]=g[t].value,!u&&!g[t].validity)return f(!0);try{d(!0),e.end=e.start>=e.end?(0,i.addMinutes)(e.start,(0,i.differenceInMinutes)(o?.end,o?.start)):e.end;const t=l?.event_id?"edit":"create";c?e=await c(e,t):e.event_id=l?.event_id||Date.now().toString(36)+Math.random().toString(36).slice(2),h(e,t),w(!0)}catch(e){console.error(e)}finally{d(!1)}},D=t=>{const n=g[t];switch(n.type){case"input":return(0,r.jsx)(Te,{value:n.value,name:t,onChange:b,touched:v,...n.config,label:y.event[t]||n.config?.label});case"date":return(0,r.jsx)(Ce,{value:n.value,name:t,onChange:(...e)=>b(...e,!0),...n.config,label:y.event[t]||n.config?.label});case"select":const a=e.find((e=>e.name===t));return(0,r.jsx)(Ee,{value:n.value,name:t,options:a?.options||[],onChange:b,touched:v,...n.config,label:y.event[t]||n.config?.label});default:return""}};return(0,r.jsx)(a.Dialog,{open:t,fullScreen:j,maxWidth:p,children:u?u({state:g,close:()=>s(!1),loading:e=>d(e),edited:l,onConfirm:h}):(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(a.DialogTitle,{children:l?y.form.editTitle:y.form.addTitle}),(0,r.jsx)(a.DialogContent,{style:{overflowX:"hidden"},children:(0,r.jsx)(a.Grid,{container:!0,spacing:2,children:Object.keys(g).map((e=>{const t=g[e];return(0,r.jsx)(a.Grid,{item:!0,sm:t.config?.sm,xs:12,children:D(e)},e)}))})}),(0,r.jsxs)(a.DialogActions,{children:[(0,r.jsx)(a.Button,{color:"inherit",fullWidth:!0,onClick:()=>w(),children:y.form.cancel}),(0,r.jsx)(a.Button,{color:"primary",fullWidth:!0,onClick:_,children:y.form.confirm})]})]})})},$e=({events:e,today:t,eachWeekStart:s,daysList:o,onViewMore:l,cellHeight:d})=>{const c=Math.round((d-27)/28-1),{translations:u,month:h,locale:p,timeZone:y}=V(),g=s.some((e=>(0,i.isSameDay)(e,t)))?t:null,m=(0,n.useMemo)((()=>{const r=[];for(let n=0;n<e.length;n++){const a=P(e[n],y);(g&&(0,i.isWithinInterval)(g,{start:(0,i.startOfDay)(a.start),end:(0,i.endOfDay)(a.end)})||(0,i.isSameDay)(a.start,t))&&r.push(a)}return r.sort(((e,t)=>t.end.getTime()-e.end.getTime()))}),[g,e,t,y]);return(0,r.jsx)(n.Fragment,{children:m.map(((n,d)=>{const y=!!g&&(0,i.isBefore)(n.start,g),v=y&&g?g:n.start;let f=I(v,n.end)+1;const x=(0,i.differenceInCalendarWeeks)(n.end,v,{weekStartsOn:h?.weekStartOn,locale:p})>0;if(x){const e=(0,i.startOfWeek)(n.start),t=(0,i.closestTo)(e,s);t&&(f=o.length-(g?0:(0,i.differenceInDays)(n.start,t)))}const j=e.filter((e=>!g&&e.event_id!==n.event_id&&c>d&&(0,i.isBefore)(e.start,(0,i.startOfDay)(t))&&(0,i.isAfter)(e.end,(0,i.startOfDay)(t))));let b=d;j.length&&(b+=j.length);const w=28*b+27;return b>c?"":b===c?(0,r.jsx)(a.Typography,{width:"100%",className:"rs__multi_day rs__hover__op",style:{top:w,fontSize:11},onClick:e=>{e.stopPropagation(),l(n.start)},children:`${Math.abs(m.length-d)} ${u.moreEvents}`},d):(0,r.jsx)("div",{className:"rs__multi_day",style:{top:w,width:100*f+"%"},children:(0,r.jsx)(K,{event:n,showdate:!1,multiday:I(n.start,n.end)>0,hasPrev:y,hasNext:x})},`${n.event_id}_${d}`)}))})},Re=()=>{const{month:e,selectedDate:t,height:s,events:o,handleGotoDay:l,getRemoteEvents:d,triggerLoading:c,handleState:u,resources:h,resourceFields:p,fields:y,locale:g,hourFormat:m}=V(),{weekStartOn:v,weekDays:f,startHour:j,endHour:b,cellRenderer:w,disableGoToDay:_}=e,D=(0,i.startOfMonth)(t),k=(0,i.endOfMonth)(t),M=(0,i.eachWeekOfInterval)({start:D,end:k},{weekStartsOn:v}),C="12"===m?"hh:mm a":"HH:mm",T=f.map((e=>(0,i.addDays)(M[0],e))),S=s/M.length,E=(0,a.useTheme)(),{headersRef:O,bodyRef:I}=de(),$=(0,n.useCallback)((async()=>{try{c(!0);const e=M[0],t=(0,i.addDays)(M[M.length-1],T.length),r=await d({start:e,end:t,view:"month"});r&&r?.length&&u(r,"events")}catch(e){throw e}finally{c(!1)}}),[t,d]);(0,n.useEffect)((()=>{d instanceof Function&&$()}),[$,d]);const R=e=>{let s=o;e&&(s=F(o,e,p,y));const d=[];for(const o of M){const c=f.map((d=>{const c=(0,i.addDays)(o,d),u=new Date(`${(0,i.format)((0,i.setHours)(c,j),`yyyy/MM/dd ${C}`)}`),h=new Date(`${(0,i.format)((0,i.setHours)(c,b),`yyyy/MM/dd ${C}`)}`),y=p.idField;return(0,r.jsxs)("span",{style:{height:S},className:"rs__cell",children:[(0,r.jsx)(ie,{start:u,end:h,day:t,height:S,resourceKey:y,resourceVal:e?e[y]:null,cellRenderer:w}),(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(a.Avatar,{style:{width:27,height:27,position:"absolute",top:0,background:(0,i.isToday)(c)?E.palette.secondary.main:"transparent",color:(0,i.isToday)(c)?E.palette.secondary.contrastText:"",marginBottom:2},children:(0,r.jsx)(a.Typography,{color:(0,i.isSameMonth)(c,D)?"textPrimary":"#ccc",className:_?"":"rs__hover__op",onClick:e=>{e.stopPropagation(),_||l(c)},children:(0,i.format)(c,"dd")})}),(0,r.jsx)($e,{events:s,today:c,eachWeekStart:M,daysList:T,onViewMore:l,cellHeight:S})]})]},d.toString())}));d.push((0,r.jsx)(n.Fragment,{children:c},o.toString()))}return d},P=e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{days:T.length,ref:O,indent:"0",sticky:"1",children:T.map(((e,t)=>(0,r.jsx)(a.Typography,{className:"rs__cell rs__header rs__header__center",align:"center",variant:"body2",children:(0,i.format)(e,"EE",{locale:g})},t)))}),(0,r.jsx)(x,{days:T.length,ref:I,indent:"0",children:R(e)})]});return h.length?(0,r.jsx)(re,{renderChildren:P}):P()},Pe=()=>{const{day:e,selectedDate:t,events:o,height:l,getRemoteEvents:d,triggerLoading:c,handleState:u,resources:h,resourceFields:p,resourceViewMode:y,fields:g,direction:m,locale:v,hourFormat:f,timeZone:j}=V(),{startHour:b,endHour:w,step:_,cellRenderer:D}=e,k=(0,i.setMinutes)((0,i.setHours)(t,b),0),M=(0,i.setMinutes)((0,i.setHours)(t,w),0),C=(0,i.eachMinuteOfInterval)({start:k,end:M},{step:_}),T=O(l,C.length),S=E(T,_),I="12"===f?"hh:mm a":"HH:mm",P=o.sort(((e,t)=>t.end.getTime()-e.end.getTime())),{headersRef:W,bodyRef:H}=de(),N=(0,n.useCallback)((async()=>{try{c(!0);const e=(0,i.addDays)(k,-1),t=(0,i.addDays)(M,1),r=await d({start:e,end:t,view:"day"});r&&r?.length&&u(r,"events")}catch(e){throw e}finally{c(!1)}}),[t,d]);(0,n.useEffect)((()=>{d instanceof Function&&N()}),[N,d]);const L=e=>{const n=R(e,t,j);return(0,r.jsx)("div",{className:"rs__block_col",style:{height:28*e.length},children:n.map(((e,n)=>{const a=(0,i.isBefore)(e.start,(0,i.startOfDay)(t)),s=(0,i.isAfter)(e.end,(0,i.endOfDay)(t));return(0,r.jsx)("div",{className:"rs__multi_day",style:{top:28*n,width:"100%"},children:(0,r.jsx)(K,{event:e,multiday:!0,hasPrev:a,hasNext:s})},e.event_id)}))})},q=e=>{let o=P;e&&(o=F(P,e,p,g));const l=h.length&&"tabs"!==y,d=28*R(l?P:o,t,j).length+45;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x,{days:1,ref:W,sticky:"1",children:[(0,r.jsx)("span",{className:"rs__cell"}),(0,r.jsxs)("span",{className:"rs__cell rs__header "+((0,i.isToday)(t)?"rs__today_cell":""),style:{height:d},children:[(0,r.jsx)(s,{date:t,locale:v}),L(o)]})]}),(0,r.jsx)(x,{days:1,ref:H,children:C.map(((s,l)=>{const d=new Date(`${(0,i.format)(t,"yyyy/MM/dd")} ${(0,i.format)(s,I)}`),c=new Date(`${(0,i.format)(t,"yyyy/MM/dd")} ${(0,i.format)((0,i.addMinutes)(s,_),I)}`),u=p.idField;return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("span",{className:"rs__cell rs__header rs__time",style:{height:T},children:(0,r.jsx)(a.Typography,{variant:"caption",children:(0,i.format)(s,I,{locale:v})})}),(0,r.jsxs)("span",{className:"rs__cell "+((0,i.isToday)(t)?"rs__today_cell":""),children:[0===l&&(0,r.jsx)(le,{todayEvents:$(o,t,j),today:k,minuteHeight:S,startHour:b,step:_,direction:m}),(0,r.jsx)(ie,{start:d,end:c,day:t,height:T,resourceKey:u,resourceVal:e?e[u]:null,cellRenderer:D})]})]},l)}))})]})};return h.length?(0,r.jsx)(re,{span:2,renderChildren:q}):q()},We=()=>{const{loading:e,view:t,dialog:i,resources:s,resourceViewMode:o,translations:l}=V(),d=(0,n.useMemo)((()=>{switch(t){case"month":return(0,r.jsx)(Re,{});case"week":return(0,r.jsx)(ce,{});case"day":return(0,r.jsx)(Pe,{});default:return""}}),[t]);return(0,r.jsxs)(v,{dialog:i?1:0,"data-testid":"rs-wrapper",children:[e&&(0,r.jsx)("div",{className:"rs__table_loading",children:(0,r.jsxs)("span",{children:[(0,r.jsx)(a.CircularProgress,{size:50}),(0,r.jsx)(a.Typography,{align:"center",children:l.loading})]})}),(0,r.jsx)(ke,{}),(0,r.jsx)(f,{resource_count:"tabs"===o?1:s.length,sx:{overflowX:"default"===o&&s.length>1?"auto":void 0},"data-testid":"grid",children:d}),i&&(0,r.jsx)(Ie,{})]})},He=()=>{const{handleState:e,selectedDate:t,disableViewNavigator:r,handleGotoDay:n,triggerDialog:a,triggerLoading:i,events:s,locale:o,resources:l,resourceViewMode:d,hourFormat:c,timeZone:u,view:h,height:p}=V();return{events:s,setEvents:t=>{e(t,"events")},disableViewNavigator:r,setDisableViewNavigator:t=>{e(t,"disableViewNavigator")},selectedDate:t,setSelectedDate:t=>{e(t,"selectedDate")},goToDay:n,view:h,setView:t=>{e(t,"view")},schedulerLocale:o,setSchedulerLocale:t=>{e(t,"locale")},triggerDialog:a,resources:l,serResources:t=>{e(t,"resources")},resourceViewMode:d,setResourceViewMode:t=>{e(t,"resourceViewMode")},hourFormat:c,setHourFormat:t=>{e(t,"hourFormat")},timeZone:u,setTimeZone:t=>{e(t,"timeZone")},triggerLoading:i,height:p,setHeight:t=>{e(t,"height")},setDirection:t=>{e(t,"direction")}}},Ne=e=>(V(e),(0,r.jsx)(We,{}));module.exports=t})();